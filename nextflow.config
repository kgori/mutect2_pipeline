/*  Sanger's LSF setup requires that perJobMemLimit be set to true */
executor {
    perJobMemLimit = true
    queueSize = 200 /* max LSF jobs that can run concurrently */
}

/*  Set singularity.enabled and .autoMounts to true to use Singularity
    containers. Not required otherwise. Other container engines will use
    their own scopes, e.g. docker{ ... }, podman{ ... }, etc.
*/
singularity {
    enabled = true
    autoMounts = true
}

process {
    /* If using Cram file inputs, set the container's REF_PATH to whatever the 
       `sanger-samtools-refpath` module gives you, otherwise there may be
       errors trying to decode reads. */
    container = '/lustre/scratch125/casm/staging/team267_murchison/kg8/20250704_Mutect2/container/gatk_latest.sif'
    containerOptions = '-B /lustre:/lustre -B /nfs:/nfs --env REF_PATH=/lustre/scratch125/core/sciops_repository/cram_cache/%2s/%2s/%s:/lustre/scratch126/core/sciops_repository/cram_cache/%2s/%2s/%s:URL=http:://refcache.dnapipelines.sanger.ac.uk::8000/%s'
    executor = 'lsf'
    cpus = 1
    memory = 2.GB
    time = 4.h
}